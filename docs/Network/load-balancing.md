---
slug: load-balancing
title: 로드밸런싱
---

**서버에 가해지는 부하를 분산해주는 장치 또는 기술**

- 시스템 가용성과 응답 시간 최적화
- 로드 밸런서: 사용자와 서버 그룹 사이에 위치하며 보이지 않는 촉진자 역할을 하여 모든 리소스 서버가 동일하게 사용되도록 하는 디바이스

## 헬스 체크

- 로드밸런서과 관리하는 서버들의 현재 상태를 주기적으로 확인하면서, 비정상적인 서버는 트래픽 분산 대상에서 제외하고 정상적인 서버로만 요청을 전달하는 기능

## 로드 밸런싱 알고리즘

로드 밸런서가 서로 다른 클라이언트 요청 각각에 가장 적합한 서버를 결정하기 위해 따르는 규칙 세트

### 1. 정적 로드 밸런싱

서버의 현재 상태를 고려하지 않고 미리 정해진 규칙에 따라 트래픽 분산

**라운드 로빈**

- 서버 목록을 순서대로 순환하며 요청 분배
- 구현이 단순하고 오버헤드가 적으나 서버 성능 차이나 요청 처리 시간을 고려하지 않음

**가중 기반 라운드 로빈**

- 각 서버에 가중치를 부여하여 성능에 비례해 트래픽 분배
- 가중치가 높은 서버는 이름 서버에 들어오는 애플리케이션 트래픽을 더 많이 수신
- 서버 사양 차이를 반영 가능하나 실시간 부하 상태는 반영하지 못함

**IP 해시**

- 클라이언트 IP 주소를 해싱하여 항상 동일한 서버로 연결
- 세션 유지가 필요한 경우 유용하나 서버 추가나 제거 시 재분배 문제가 발생 가능

### 2. 동적 로드 밸런싱

트래픽을 배포하기 전에 서버의 현재 상태 검사

**최소 연결**

- 현재 활성 연결 수가 가장 적은 서버로 요청 전달
- 모든 연결에 모든 서버에 대해 동일한 처리 능력이 필요하다고 가정
- 실제 부하를 반영한 분배이나 연결 수만으로는 실제 처리량을 정확히 파악하기 어려움

**가중치 기반 최소 연결**

- 최소 연결 방식에 서버 가중치를 추가로 고려
- (현재 연결 수/서버 가중치)가 가장 작은 서버 선택
- 서버 성능 차이와 현재 부하를 모두 반영하나 계산 오버헤드가 증가함

**최소 응답 시간**

- 평균 응답 시간과 활성 연결 수를 함께 고려하며 가장 빠르게 응답하는 서버로 요청 전달
- 사용자 경험을 최적화하나 응답 시간 측정 및 계산 오버헤드 발생

**리소스 기반**

- CPU 사용률, 메모리 사용량, 디스크 I/O 등을 모니터링
- 리소스 여유가 가장 많은 서버로 분배
- 서버 상태를 가장 정확하게 반영하나 모니터링 에이전트와 복잡한 구현 필요
- 에이전트: 각 서버에서 실행되고 특수한 용량 및 메모리와 같은 서버 리소스의 사용량 계산
